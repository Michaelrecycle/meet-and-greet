<html>
<body>
<!-- OpenTok.js library -->
<script src="https://static.opentok.com/v2/js/opentok.js"></script>
<script>

// credentials
var apiKey = '46713992';
var sessionId = '1_MX40NjcxMzk5Mn5-MTU4ODM4Nzg1NjM0NX5sWWNCWVdKS1NXUzNWQS9ydU1vdnhxOWp-fg';
var token = 'T1==cGFydG5lcl9pZD00NjcxMzk5MiZzaWc9OGIzNWIyNDg5Mjk0MTM1ZDVjYWNjYTljMjUxMTg3NzMxNjRlODEwZDpzZXNzaW9uX2lkPTFfTVg0ME5qY3hNems1TW41LU1UVTRPRE00TnpnMU5qTTBOWDVzV1dOQ1dWZEtTMU5YVXpOV1FTOXlkVTF2ZG5oeE9XcC1mZyZjcmVhdGVfdGltZT0xNTg4Mzg3ODc4Jm5vbmNlPTAuODgzOTYxNDY4MjQ0MzEwOSZyb2xlPXB1Ymxpc2hlciZleHBpcmVfdGltZT0xNTg4OTkyNjc3JmluaXRpYWxfbGF5b3V0X2NsYXNzX2xpc3Q9';

initialiseSession()

function handleError(error) {
   if(error) {
      alert(error.message)
   }
}

function initialiseSession() {
   var session = OT.initSession(apiKey, sessionId);

  // Subscribe to a newly created stream
  session.on('streamCreated', function(event) {
  session.subscribe(event.stream, 'subscriber', {
    insertMode: 'append',
    width: '100%',
    height: '100%'
   }, handleError);
  });

  // Create a publisher
  var publisher = OT.initPublisher('publisher', {
    insertMode: 'append',
    width: '100%',
    height: '100%'
  }, handleError);

  // Connect to the session
  session.connect(token, function(error) {
    // If the connection is successful, publish to the session
    if (error) {
      handleError(error);
    } else {
      session.publish(publisher, handleError);
    }
  });
  
}

</script>
</body>
</html>